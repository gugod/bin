#!/usr/bin/env perl6
use v6;

my %IGNORE = (
    "node_modules" => 1,
    ".git" => 1,
);

sub find-files($dir) {
    my @stash = $dir;
    dir($dir).flatmap(-> $p {
        if $p.f {
            $p.path
        } elsif $p.d && ! %IGNORE{$p.basename} {
            find-files($p.path)
        }
    });
}

my $start_dir = @*ARGS[0] // ".";

.say for find-files2($start_dir);
