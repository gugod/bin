#!/usr/bin/env perl6
use v6;

my %IGNORE = (
    "node_modules" => 1,
    ".git" => 1,
);

sub find-files($dir) {
    my @stash = $dir;
    gather for dir $dir -> $p {
        if $p.f {
            take($p.path)
        }
        elsif $p.d && ! %IGNORE{$p.basename} {
            .take for find-files($p.path)
        }
    }
}

my $start_dir = @*ARGS[0] // ".";

.say for find-files($start_dir);
